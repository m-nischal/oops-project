{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/nischalreddymuthumula/Desktop/untitled%20folder%20copy/src/pages/products.js"],"sourcesContent":["// src/pages/products.js\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\n\nfunction formatPrice(p) {\n  if (typeof p !== \"number\") return p;\n  return `₹${p.toLocaleString(\"en-IN\")}`;\n}\n\nexport default function ProductsPage() {\n  const router = useRouter();\n  const { categoryId, q } = router.query;\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function load() {\n      setLoading(true);\n      try {\n        const qparams = new URLSearchParams();\n        if (categoryId) qparams.set(\"categoryId\", categoryId);\n        if (q) qparams.set(\"q\", q);\n        qparams.set(\"limit\", \"48\");\n        const res = await fetch(`/api/products?${qparams.toString()}`);\n        const json = await res.json();\n        // API may return { items: [...] } or raw array\n        const list = json.items || json.products || json || [];\n        // if items contain wrappers (e.g. { product: {...} }) normalize:\n        const normalized = list.map(p => (p && p.product) ? p.product : p);\n        setItems(normalized);\n      } catch (e) {\n        console.error(e);\n      } finally {\n        setLoading(false);\n      }\n    }\n    load();\n  }, [categoryId, q]);\n\n  return (\n    <div style={{ padding: 20, fontFamily: \"system-ui, sans-serif\" }}>\n      <header style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n        <h1 style={{ margin: 0 }}>\n          <Link href=\"/categories\">Categories</Link> / Products\n        </h1>\n        <Link href=\"/cart\">Cart</Link>\n      </header>\n\n      <div style={{ marginTop: 12 }}>\n        {categoryId && <div style={{ color: \"#444\", marginBottom: 8 }}>Filtering by category: <strong>{categoryId}</strong></div>}\n        {loading ? <p>Loading products…</p> : (\n          items.length === 0 ? <p>No products found.</p> : (\n            <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, minmax(220px, 1fr))\", gap: 12 }}>\n              {items.map(p => (\n                <Link\n                  key={p._id}\n                  href={`/product/${p._id}`}\n                  style={{\n                    textDecoration: \"none\",\n                    color: \"inherit\"\n                  }}\n                >\n                  <article\n                    style={{\n                      border: \"1px solid #eee\",\n                      padding: 12,\n                      borderRadius: 8,\n                      cursor: \"pointer\",\n                      transition: \"transform 120ms ease, box-shadow 120ms ease\",\n                      background: \"#fff\",\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                      justifyContent: \"space-between\",\n                      height: \"100%\"\n                    }}\n                    onMouseEnter={(ev) => {\n                      ev.currentTarget.style.transform = \"translateY(-4px)\";\n                      ev.currentTarget.style.boxShadow = \"0 6px 20px rgba(0,0,0,0.08)\";\n                    }}\n                    onMouseLeave={(ev) => {\n                      ev.currentTarget.style.transform = \"translateY(0)\";\n                      ev.currentTarget.style.boxShadow = \"none\";\n                    }}\n                  >\n                    <div>\n                      <div style={{\n                        height: 140,\n                        marginBottom: 8,\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        background: \"#fafafa\",\n                        borderRadius: 6\n                      }}>\n                        <img\n                          src={p.images && p.images[0] ? p.images[0] : \"/images/placeholder.png\"}\n                          alt={p.name}\n                          style={{ maxHeight: \"100%\", maxWidth: \"100%\", objectFit: \"contain\" }}\n                        />\n                      </div>\n                      <h3 style={{ margin: \"6px 0\", fontSize: 16, lineHeight: \"1.2em\" }}>{p.name}</h3>\n                      <div style={{ color: \"#666\", fontSize: 14, marginBottom: 6 }}>\n                        {p.description ? (p.description.slice(0, 80) + (p.description.length > 80 ? \"…\" : \"\")) : \"\"}\n                      </div>\n                    </div>\n\n                    <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", marginTop: 8 }}>\n                      <div style={{ fontWeight: 700 }}>{formatPrice(p.price)}</div>\n                      <span style={{ fontSize: 13, color: \"#0070f3\" }}>View →</span>\n                    </div>\n                  </article>\n                </Link>\n              ))}\n            </div>\n          )\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}