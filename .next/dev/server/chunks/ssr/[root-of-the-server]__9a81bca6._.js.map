{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/nischalreddymuthumula/Desktop/untitled%20folder/src/components/Header.js"],"sourcesContent":["// src/components/Header.js\nimport Link from \"next/link\";\nimport { useEffect, useState } from \"react\";\n\nexport default function Header() {\n  const [count, setCount] = useState(0);\n  useEffect(() => {\n    try {\n      const cart = JSON.parse(localStorage.getItem(\"lm_cart\") || \"[]\");\n      setCount(cart.reduce((s, i) => s + (i.qty||0), 0));\n    } catch (e) { setCount(0); }\n    const onStorage = () => {\n      try {\n        const cart = JSON.parse(localStorage.getItem(\"lm_cart\") || \"[]\");\n        setCount(cart.reduce((s, i) => s + (i.qty||0), 0));\n      } catch (e) {}\n    };\n    window.addEventListener(\"storage\", onStorage);\n    return () => window.removeEventListener(\"storage\", onStorage);\n  }, []);\n\n  return (\n    <header style={{ display:\"flex\", justifyContent:\"space-between\", padding:\"1rem\", borderBottom:\"1px solid #eee\" }}>\n      <div>\n        <Link href=\"/\" style={{ fontWeight:700, fontSize:18 }}>LiveMart (dev)</Link>\n      </div>\n      <nav>\n        <Link href=\"/cart\">Cart ({count})</Link>\n      </nav>\n    </header>\n  );\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;AAC3B;AACA;;;;AAEe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,IAAA,gHAAS,EAAC;QACR,IAAI;YACF,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,cAAc;YAC3D,SAAS,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,CAAC,EAAE,GAAG,IAAE,CAAC,GAAG;QACjD,EAAE,OAAO,GAAG;YAAE,SAAS;QAAI;QAC3B,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,cAAc;gBAC3D,SAAS,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,CAAC,EAAE,GAAG,IAAE,CAAC,GAAG;YACjD,EAAE,OAAO,GAAG,CAAC;QACf;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACrD,GAAG,EAAE;IAEL,qBACE,qKAAC;QAAO,OAAO;YAAE,SAAQ;YAAQ,gBAAe;YAAiB,SAAQ;YAAQ,cAAa;QAAiB;;0BAC7G,qKAAC;0BACC,cAAA,qKAAC,gIAAI;oBAAC,MAAK;oBAAI,OAAO;wBAAE,YAAW;wBAAK,UAAS;oBAAG;8BAAG;;;;;;;;;;;0BAEzD,qKAAC;0BACC,cAAA,qKAAC,gIAAI;oBAAC,MAAK;;wBAAQ;wBAAO;wBAAM;;;;;;;;;;;;;;;;;;AAIxC","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///Users/nischalreddymuthumula/Desktop/untitled%20folder/src/pages/cart.js"],"sourcesContent":["// src/pages/cart.js\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport Header from \"components/Header\";\nimport { useRouter } from \"next/router\";\n\nexport default function CartPage() {\n  const [cart, setCart] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(()=> {\n    (async () => {\n      const stored = JSON.parse(localStorage.getItem(\"lm_cart\") || \"[]\");\n      // For each cart item, fetch inventory and clamp qty to available stock\n      const updated = await Promise.all(stored.map(async (item) => {\n        try {\n          const res = await fetch(`/api/inventory/${item.productId}`);\n          if (!res.ok) return item;\n          const inv = await res.json();\n          // find matching size entry\n          const sizeEntry = (inv.sizes || []).find(s => s.label === item.sizeLabel);\n          const available = sizeEntry ? (sizeEntry.stock || 0) : null;\n          if (available !== null && item.qty > available) {\n            return { ...item, qty: available };\n          }\n          return item;\n        } catch (e) {\n          return item;\n        }\n      }));\n      setCart(updated);\n      // persist any clamps back to localStorage\n      localStorage.setItem(\"lm_cart\", JSON.stringify(updated));\n      setLoading(false);\n    })();\n  }, []);\n\n  function updateQty(idx, n) {\n    const c = [...cart];\n    c[idx].qty = Math.max(1, Number(n));\n    setCart(c);\n    localStorage.setItem(\"lm_cart\", JSON.stringify(c));\n    window.dispatchEvent(new Event(\"storage\"));\n  }\n\n  function remove(idx) {\n    const c = [...cart];\n    c.splice(idx,1);\n    setCart(c);\n    localStorage.setItem(\"lm_cart\", JSON.stringify(c));\n    window.dispatchEvent(new Event(\"storage\"));\n  }\n\n  const subtotal = cart.reduce((s,i)=> s + (i.unitPrice||0)*(i.qty||0), 0);\n\n  return (\n    <div>\n      <Header />\n      <main style={{ padding:20 }}>\n        <h2>Your cart</h2>\n        {loading ? <div>Checking stock...</div> : null}\n        {cart.length===0 ? <div>Cart empty — <Link href=\"/\">browse products</Link></div> : null}\n\n        <div style={{ display:\"grid\", gap:12 }}>\n          {cart.map((item, idx) => (\n            <div key={idx} style={{ border:\"1px solid #eee\", padding:12, display:\"flex\", justifyContent:\"space-between\" }}>\n              <div>\n                <div style={{ fontWeight:700 }}>{item.name}</div>\n                <div>Size: {item.sizeLabel}</div>\n                <div>₹{item.unitPrice}</div>\n              </div>\n              <div style={{ display:\"flex\", gap:8, alignItems:\"center\" }}>\n                <input type=\"number\" value={item.qty} min={1} style={{ width:72 }} onChange={(e)=>updateQty(idx, e.target.value)} />\n                <button onClick={()=>remove(idx)}>Remove</button>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div style={{ marginTop:20 }}>\n          <div>Subtotal: ₹{subtotal}</div>\n          <button style={{ marginTop:12 }} onClick={()=> router.push(\"/checkout\")}>Proceed to checkout</button>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}