{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/nischalreddymuthumula/Desktop/untitled%20folder/src/pages/products.js"],"sourcesContent":["// src/pages/products.js\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\n\nfunction formatPrice(p) {\n  if (typeof p !== \"number\") return p;\n  return `₹${p.toLocaleString(\"en-IN\")}`;\n}\n\nexport default function ProductsPage() {\n  const router = useRouter();\n  const { categoryId, q } = router.query;\n\n  const [items, setItems] = useState([]);\n  const [category, setCategory] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function load() {\n      setLoading(true);\n      try {\n        // fetch products - pass categoryId if present\n        const qparams = new URLSearchParams();\n        if (categoryId) qparams.set(\"categoryId\", categoryId);\n        if (q) qparams.set(\"q\", q);\n        qparams.set(\"limit\", \"48\");\n        const res = await fetch(`/api/products?${qparams.toString()}`);\n        const json = await res.json();\n        // many APIs respond { items, total } — handle both\n        const list = json.items || json.products || json || [];\n        setItems(list);\n\n        // fetch category info if categoryId provided\n        if (categoryId) {\n          const rc = await fetch(`/api/categories?parentId=${categoryId}`);\n          // fallback: try fetching the specific path or id - your API may support a get-by-id\n          try {\n            const catById = await fetch(`/api/categories?path=`);\n            // ignore — we just attempt to populate category if you have endpoint for it\n          } catch (e) {}\n        }\n      } catch (e) {\n        console.error(e);\n      } finally {\n        setLoading(false);\n      }\n    }\n    load();\n  }, [categoryId, q]);\n\n  return (\n    <div style={{ padding: 20, fontFamily: \"system-ui, sans-serif\" }}>\n      <header style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n        <h1 style={{ margin: 0 }}>\n          <Link href=\"/categories\">Categories</Link> / Products\n        </h1>\n        <Link href=\"/cart\">Cart</Link>\n      </header>\n\n      <div style={{ marginTop: 12 }}>\n        {categoryId && <div style={{ color: \"#444\", marginBottom: 8 }}>Filtering by category: <strong>{categoryId}</strong></div>}\n        {loading ? <p>Loading products…</p> : (\n          items.length === 0 ? <p>No products found.</p> : (\n            <div style={{ display: \"grid\", gridTemplateColumns: \"repeat(auto-fill, minmax(220px, 1fr))\", gap: 12 }}>\n              {items.map(p => (\n                <article key={p._id} style={{ border: \"1px solid #eee\", padding: 12, borderRadius: 8 }}>\n                  <div style={{ height: 140, marginBottom: 8, display: \"flex\", alignItems: \"center\", justifyContent: \"center\", background: \"#fafafa\", borderRadius: 6 }}>\n                    <img src={p.images && p.images[0] ? p.images[0] : \"/images/placeholder.png\"} alt={p.name} style={{ maxHeight: \"100%\", maxWidth: \"100%\", objectFit: \"contain\" }} />\n                  </div>\n                  <h3 style={{ margin: \"6px 0\" }}>\n                    <Link href={`/product/${p._id}`}>{p.name}</Link>\n                  </h3>\n                  <div style={{ color: \"#666\", fontSize: 14, marginBottom: 6 }}>{p.description ? (p.description.slice(0, 80) + (p.description.length > 80 ? \"…\" : \"\")) : \"\"}</div>\n                  <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n                    <div style={{ fontWeight: 700 }}>{formatPrice(p.price)}</div>\n                    <Link href={`/product/${p._id}`}>View</Link>\n                  </div>\n                </article>\n              ))}\n            </div>\n          )\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}