{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/nischalreddymuthumula/Desktop/untitled%20folder/src/components/Header.js"],"sourcesContent":["// src/components/Header.js\nimport Link from \"next/link\";\nimport { useEffect, useState } from \"react\";\n\nexport default function Header() {\n  const [count, setCount] = useState(0);\n  useEffect(() => {\n    try {\n      const cart = JSON.parse(localStorage.getItem(\"lm_cart\") || \"[]\");\n      setCount(cart.reduce((s, i) => s + (i.qty||0), 0));\n    } catch (e) { setCount(0); }\n    const onStorage = () => {\n      try {\n        const cart = JSON.parse(localStorage.getItem(\"lm_cart\") || \"[]\");\n        setCount(cart.reduce((s, i) => s + (i.qty||0), 0));\n      } catch (e) {}\n    };\n    window.addEventListener(\"storage\", onStorage);\n    return () => window.removeEventListener(\"storage\", onStorage);\n  }, []);\n\n  return (\n    <header style={{ display:\"flex\", justifyContent:\"space-between\", padding:\"1rem\", borderBottom:\"1px solid #eee\" }}>\n      <div>\n        <Link href=\"/\" style={{ fontWeight:700, fontSize:18 }}>LiveMart (dev)</Link>\n      </div>\n      <nav>\n        <Link href=\"/cart\">Cart ({count})</Link>\n      </nav>\n    </header>\n  );\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;AAC3B;AACA;;;;AAEe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,IAAA,gHAAS,EAAC;QACR,IAAI;YACF,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,cAAc;YAC3D,SAAS,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,CAAC,EAAE,GAAG,IAAE,CAAC,GAAG;QACjD,EAAE,OAAO,GAAG;YAAE,SAAS;QAAI;QAC3B,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,cAAc;gBAC3D,SAAS,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,IAAI,CAAC,EAAE,GAAG,IAAE,CAAC,GAAG;YACjD,EAAE,OAAO,GAAG,CAAC;QACf;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACrD,GAAG,EAAE;IAEL,qBACE,qKAAC;QAAO,OAAO;YAAE,SAAQ;YAAQ,gBAAe;YAAiB,SAAQ;YAAQ,cAAa;QAAiB;;0BAC7G,qKAAC;0BACC,cAAA,qKAAC,gIAAI;oBAAC,MAAK;oBAAI,OAAO;wBAAE,YAAW;wBAAK,UAAS;oBAAG;8BAAG;;;;;;;;;;;0BAEzD,qKAAC;0BACC,cAAA,qKAAC,gIAAI;oBAAC,MAAK;;wBAAQ;wBAAO;wBAAM;;;;;;;;;;;;;;;;;;AAIxC","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///Users/nischalreddymuthumula/Desktop/untitled%20folder/src/pages/checkout.js"],"sourcesContent":["// src/pages/checkout.js\nimport { useEffect, useState } from \"react\";\nimport Header from \"components/Header\";\nimport { useRouter } from \"next/router\";\n\nexport default function Checkout() {\n  const [cart, setCart] = useState([]);\n  const [name, setName] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const router = useRouter();\n\n  useEffect(()=> {\n    setCart(JSON.parse(localStorage.getItem(\"lm_cart\") || \"[]\"));\n  }, []);\n\n  async function placeOrder() {\n    if (!name) return alert(\"Enter name\");\n    if (cart.length === 0) return alert(\"Cart empty\");\n\n    const items = cart.map(i => ({ productId: i.productId, sizeLabel: i.sizeLabel, qty: i.qty }));\n    const customer = { name, address, phone };\n\n    setLoading(true);\n    try {\n      // 1) (dev) optionally simulate payment by calling mock charge\n      // compute amount as subtotal\n      const amount = cart.reduce((s,i)=> s + (i.unitPrice||0)*(i.qty||0), 0);\n      const payRes = await fetch(\"/api/payments/mock/charge\", {\n        method:\"POST\", headers:{\"Content-Type\":\"application/json\"},\n        body: JSON.stringify({ amount })\n      });\n      if (!payRes.ok) {\n        throw new Error(\"Payment failed\");\n      }\n      const payData = await payRes.json();\n      // payData.paymentId is returned by mock charge. Use it as payment metadata.\n\n      // 2) create order\n      const res = await fetch(\"/api/orders\", {\n        method:\"POST\", headers:{\"Content-Type\":\"application/json\"},\n        body: JSON.stringify({ customer, items })\n      });\n      if (!res.ok) {\n        const err = await res.json();\n        throw new Error(err.error || \"Order creation failed\");\n      }\n      const order = await res.json();\n\n      // 3) clear cart and navigate to order page\n      localStorage.removeItem(\"lm_cart\");\n      window.dispatchEvent(new Event(\"storage\"));\n      router.push(`/order/${order._id}`);\n    } catch (e) {\n      alert(\"Checkout failed: \" + (e.message || e));\n      console.error(e);\n    } finally { setLoading(false); }\n  }\n\n  return (\n    <div>\n      <Header />\n      <main style={{ padding:20 }}>\n        <h2>Checkout</h2>\n\n        <div style={{ maxWidth:600 }}>\n          <div style={{ marginBottom:8 }}>\n            <label>Name</label><br />\n            <input value={name} onChange={(e)=>setName(e.target.value)} style={{ width:\"100%\" }} />\n          </div>\n\n          <div style={{ marginBottom:8 }}>\n            <label>Address</label><br />\n            <textarea value={address} onChange={(e)=>setAddress(e.target.value)} style={{ width:\"100%\" }} />\n          </div>\n\n          <div style={{ marginBottom:8 }}>\n            <label>Phone</label><br />\n            <input value={phone} onChange={(e)=>setPhone(e.target.value)} style={{ width:\"100%\" }} />\n          </div>\n\n          <div style={{ marginTop:12 }}>\n            <div>Items: {cart.length}</div>\n            <button onClick={placeOrder} disabled={loading} style={{ marginTop:10 }}>\n              {loading ? \"Placing orderâ€¦\" : \"Place order\"}\n            </button>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;AACxB;AACA;AACA;;;;;AAEe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC,EAAE;IACnC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,oIAAS;IAExB,IAAA,gHAAS,EAAC;QACR,QAAQ,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,cAAc;IACxD,GAAG,EAAE;IAEL,eAAe;QACb,IAAI,CAAC,MAAM,OAAO,MAAM;QACxB,IAAI,KAAK,MAAM,KAAK,GAAG,OAAO,MAAM;QAEpC,MAAM,QAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;gBAAE,WAAW,EAAE,SAAS;gBAAE,WAAW,EAAE,SAAS;gBAAE,KAAK,EAAE,GAAG;YAAC,CAAC;QAC3F,MAAM,WAAW;YAAE;YAAM;YAAS;QAAM;QAExC,WAAW;QACX,IAAI;YACF,8DAA8D;YAC9D,6BAA6B;YAC7B,MAAM,SAAS,KAAK,MAAM,CAAC,CAAC,GAAE,IAAK,IAAI,CAAC,EAAE,SAAS,IAAE,CAAC,IAAE,CAAC,EAAE,GAAG,IAAE,CAAC,GAAG;YACpE,MAAM,SAAS,MAAM,MAAM,6BAA6B;gBACtD,QAAO;gBAAQ,SAAQ;oBAAC,gBAAe;gBAAkB;gBACzD,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAO;YAChC;YACA,IAAI,CAAC,OAAO,EAAE,EAAE;gBACd,MAAM,IAAI,MAAM;YAClB;YACA,MAAM,UAAU,MAAM,OAAO,IAAI;YACjC,4EAA4E;YAE5E,kBAAkB;YAClB,MAAM,MAAM,MAAM,MAAM,eAAe;gBACrC,QAAO;gBAAQ,SAAQ;oBAAC,gBAAe;gBAAkB;gBACzD,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAU;gBAAM;YACzC;YACA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,MAAM,MAAM,IAAI,IAAI;gBAC1B,MAAM,IAAI,MAAM,IAAI,KAAK,IAAI;YAC/B;YACA,MAAM,QAAQ,MAAM,IAAI,IAAI;YAE5B,2CAA2C;YAC3C,aAAa,UAAU,CAAC;YACxB,OAAO,aAAa,CAAC,IAAI,MAAM;YAC/B,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,MAAM,GAAG,EAAE;QACnC,EAAE,OAAO,GAAG;YACV,MAAM,sBAAsB,CAAC,EAAE,OAAO,IAAI,CAAC;YAC3C,QAAQ,KAAK,CAAC;QAChB,SAAU;YAAE,WAAW;QAAQ;IACjC;IAEA,qBACE,qKAAC;;0BACC,qKAAC,+HAAM;;;;;0BACP,qKAAC;gBAAK,OAAO;oBAAE,SAAQ;gBAAG;;kCACxB,qKAAC;kCAAG;;;;;;kCAEJ,qKAAC;wBAAI,OAAO;4BAAE,UAAS;wBAAI;;0CACzB,qKAAC;gCAAI,OAAO;oCAAE,cAAa;gCAAE;;kDAC3B,qKAAC;kDAAM;;;;;;kDAAY,qKAAC;;;;;kDACpB,qKAAC;wCAAM,OAAO;wCAAM,UAAU,CAAC,IAAI,QAAQ,EAAE,MAAM,CAAC,KAAK;wCAAG,OAAO;4CAAE,OAAM;wCAAO;;;;;;;;;;;;0CAGpF,qKAAC;gCAAI,OAAO;oCAAE,cAAa;gCAAE;;kDAC3B,qKAAC;kDAAM;;;;;;kDAAe,qKAAC;;;;;kDACvB,qKAAC;wCAAS,OAAO;wCAAS,UAAU,CAAC,IAAI,WAAW,EAAE,MAAM,CAAC,KAAK;wCAAG,OAAO;4CAAE,OAAM;wCAAO;;;;;;;;;;;;0CAG7F,qKAAC;gCAAI,OAAO;oCAAE,cAAa;gCAAE;;kDAC3B,qKAAC;kDAAM;;;;;;kDAAa,qKAAC;;;;;kDACrB,qKAAC;wCAAM,OAAO;wCAAO,UAAU,CAAC,IAAI,SAAS,EAAE,MAAM,CAAC,KAAK;wCAAG,OAAO;4CAAE,OAAM;wCAAO;;;;;;;;;;;;0CAGtF,qKAAC;gCAAI,OAAO;oCAAE,WAAU;gCAAG;;kDACzB,qKAAC;;4CAAI;4CAAQ,KAAK,MAAM;;;;;;;kDACxB,qKAAC;wCAAO,SAAS;wCAAY,UAAU;wCAAS,OAAO;4CAAE,WAAU;wCAAG;kDACnE,UAAU,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO5C","debugId":null}}]
}