{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/nischalreddymuthumula/Desktop/untitled%20folder/src/lib/dbConnect.js"],"sourcesContent":["// lib/dbConnect.js\nimport mongoose from \"mongoose\";\n\n/**\n * @file dbConnect\n * @brief Reusable MongoDB connection util for Next.js API routes.\n *\n * Throws if MONGO_URI missing. Caches connection in global to avoid multiple\n * connections during hot-reload/development.\n */\n\nconst MONGO_URI = process.env.MONGO_URI;\nif (!MONGO_URI) throw new Error(\"MONGO_URI not set\");\n\nlet cached = global._mongoose || { conn: null, promise: null };\nif (!global._mongoose) global._mongoose = cached;\n\n/**\n * Ensure there is a single mongoose connection used across calls.\n * @returns {Promise<mongoose.Mongoose>}\n */\nexport default async function dbConnect() {\n  if (cached.conn) return cached.conn;\n  if (!cached.promise) {\n    // Use the connection string directly; options are managed by mongoose v8 defaults.\n    cached.promise = mongoose.connect(MONGO_URI).then(m => m);\n  }\n  cached.conn = await cached.promise;\n  return cached.conn;\n}\n"],"names":[],"mappings":"AAAA,mBAAmB;;;;;AACnB;;AAEA;;;;;;CAMC,GAED,MAAM,YAAY,QAAQ,GAAG,CAAC,SAAS;AACvC,IAAI,CAAC,WAAW,MAAM,IAAI,MAAM;AAEhC,IAAI,SAAS,yDAAO,SAAS,IAAI;IAAE,MAAM;IAAM,SAAS;AAAK;AAC7D,IAAI,CAAC,yDAAO,SAAS,EAAE,yDAAO,SAAS,GAAG;AAM3B,eAAe;IAC5B,IAAI,OAAO,IAAI,EAAE,OAAO,OAAO,IAAI;IACnC,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,mFAAmF;QACnF,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,WAAW,IAAI,CAAC,CAAA,IAAK;IACzD;IACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IAClC,OAAO,OAAO,IAAI;AACpB","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/nischalreddymuthumula/Desktop/untitled%20folder/src/models/productModel.js"],"sourcesContent":["// models/productModel.js (excerpt)\nimport mongoose from \"mongoose\";\n\nconst ProductSchema = new mongoose.Schema({\n  name: { type: String, required: true, text: true },\n  description: { type: String, text: true },\n  price: { type: Number, required: true },\n  images: [String],\n  sizes: [{ label: String, stock: Number }],\n  // normalized categories\n  categories: [{ type: mongoose.Schema.Types.ObjectId, ref: \"Category\" }],\n  primaryCategory: { type: mongoose.Schema.Types.ObjectId, ref: \"Category\" },\n  storefronts: { type: [String], default: [\"livemart\"] }, // which storefronts the product appears in\n  productType: { type: String, enum: [\"clothing\", \"tech\", \"grocery\", \"other\"], default: \"other\" },\n}, { timestamps: true });\n\nProductSchema.index({ categories: 1 });\nProductSchema.index({ productType: 1 });\n\nexport default mongoose.models.Product || mongoose.model(\"Product\", ProductSchema);\n"],"names":[],"mappings":"AAAA,mCAAmC;;;;;AACnC;;AAEA,MAAM,gBAAgB,IAAI,oHAAQ,CAAC,MAAM,CAAC;IACxC,MAAM;QAAE,MAAM;QAAQ,UAAU;QAAM,MAAM;IAAK;IACjD,aAAa;QAAE,MAAM;QAAQ,MAAM;IAAK;IACxC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,QAAQ;QAAC;KAAO;IAChB,OAAO;QAAC;YAAE,OAAO;YAAQ,OAAO;QAAO;KAAE;IACzC,wBAAwB;IACxB,YAAY;QAAC;YAAE,MAAM,oHAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;YAAE,KAAK;QAAW;KAAE;IACvE,iBAAiB;QAAE,MAAM,oHAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;QAAE,KAAK;IAAW;IACzE,aAAa;QAAE,MAAM;YAAC;SAAO;QAAE,SAAS;YAAC;SAAW;IAAC;IACrD,aAAa;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAY;YAAQ;YAAW;SAAQ;QAAE,SAAS;IAAQ;AAChG,GAAG;IAAE,YAAY;AAAK;AAEtB,cAAc,KAAK,CAAC;IAAE,YAAY;AAAE;AACpC,cAAc,KAAK,CAAC;IAAE,aAAa;AAAE;uCAEtB,oHAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,oHAAQ,CAAC,KAAK,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///Users/nischalreddymuthumula/Desktop/untitled%20folder/src/pages/api/inventory/%5BproductId%5D.js"],"sourcesContent":["// src/pages/api/inventory/[productId].js\nimport dbConnect from \"lib/dbConnect.js\";\nimport ProductModel from \"models/productModel.js\";\n\n/**\n * GET /api/inventory/:productId\n * Returns sizes and stock for a product\n * Public for now â€” restrict to admin if necessary.\n */\nexport default async function handler(req, res) {\n  try { await dbConnect(); } catch (err) {\n    console.error(\"DB connect failed:\", err);\n    return res.status(500).json({ error: \"Database connection failed\" });\n  }\n\n  const { productId } = req.query;\n  if (req.method !== \"GET\") {\n    res.setHeader(\"Allow\", [\"GET\"]);\n    return res.status(405).end(`Method ${req.method} Not Allowed`);\n  }\n\n  try {\n    const doc = await ProductModel.findById(productId, { sizes: 1, name: 1 }).lean();\n    if (!doc) return res.status(404).json({ error: \"Product not found\" });\n    return res.status(200).json({ productId: doc._id, name: doc.name, sizes: doc.sizes || [] });\n  } catch (err) {\n    console.error(\"GET /api/inventory/[productId] error:\", err);\n    return res.status(500).json({ error: err.message || \"Failed to fetch inventory\" });\n  }\n}\n"],"names":[],"mappings":"AAAA,yCAAyC;;;;;AACzC;AACA;;;AAOe,eAAe,QAAQ,GAAG,EAAE,GAAG;IAC5C,IAAI;QAAE,MAAM,IAAA,2HAAS;IAAI,EAAE,OAAO,KAAK;QACrC,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAA6B;IACpE;IAEA,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,KAAK;IAC/B,IAAI,IAAI,MAAM,KAAK,OAAO;QACxB,IAAI,SAAS,CAAC,SAAS;YAAC;SAAM;QAC9B,OAAO,IAAI,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,OAAO,EAAE,IAAI,MAAM,CAAC,YAAY,CAAC;IAC/D;IAEA,IAAI;QACF,MAAM,MAAM,MAAM,iIAAY,CAAC,QAAQ,CAAC,WAAW;YAAE,OAAO;YAAG,MAAM;QAAE,GAAG,IAAI;QAC9E,IAAI,CAAC,KAAK,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAoB;QACnE,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,WAAW,IAAI,GAAG;YAAE,MAAM,IAAI,IAAI;YAAE,OAAO,IAAI,KAAK,IAAI,EAAE;QAAC;IAC3F,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,yCAAyC;QACvD,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO,IAAI;QAA4B;IAClF;AACF","debugId":null}}]
}